{% extends "layouts/base.html" %}

{% block title %} Gyerekek {% endblock %} 

<!-- Element injected in the BODY element -->
{% block body_class %} sidebar-mini pace-primary {% endblock body_class %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}
  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="/static/assets/plugins/fontawesome-free/css/all.min.css">
  <!-- adminlte-->
  <link rel="stylesheet" href="/static/assets/css/adminlte.min.css">

  <link rel="stylesheet" href="/static/assets/css/jquery.dataTables.min.css">
  <link rel="stylesheet" href="/static/assets/css/buttons.dataTables.min.css">
  <style>
              tfoot input {
                  width: 100%;
                  padding: 3px;
                  box-sizing: border-box;
                   }
                   
              .dataTables_wrapper .dataTables_paginate {
                  background-color: PeachPuff;
                  }

</style>

              tfoot input {
                  width: 100%;
                  padding: 3px;
                  box-sizing: border-box;
                   }


{% endblock stylesheets %}

{% block content %}  

  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h1>Gyerekek </h1>
          </div>
          
        </div>
      </div><!-- /.container-fluid -->
    </section>

    <!-- Main content -->
    <section class="content">

      <!-- Default box -->
      <div class="card">
        <div class="card-header">
        <div class="row">
          <div class="col-8">
            <a class="btn bg-gradient-success" href="{% url 'gyerek' %}">Gyerekek felvétele</a>
            
          </div>
          <div class="col-4 align-self-right">
          </div>
        </div>
        </div>
        <div class="card-body">
          

          <table id="tabla" class="table table-striped table-bordered" >
            
              <thead class="thead-light">
                  <tr>
                      <th scope="col">Kód</th>
                      <th scope="col">Születési idő</th>
                      <th scope="col">Anyja neve </th>
                      <th scope="col">Aktív</th>
                      <th scope="col">Szülők</th>
                      <th scope="col">E-mail</th>
                      <th scope="col">Helyszín</th>
                      
                      
                  </tr>
                  
              </thead>
              <tbody>
                  {% for gyerek in gyerekek %}
                  <tr>
                    
                      {% if gyerek.aktiv %}
                        <td><a href="{% url 'gyerek_mod' gyerek.id %}">{{gyerek.kod}}</a></td>
                        <td>{{gyerek.szul_ido|date:'Y-m-d'}}</td>
                        <td>{{gyerek.anyja_neve}}</td>
                        <td><strong>Aktív</strong></td>
                        <td>
                        {% for szulo in gyerek.szulok%}
                          <a href="{% url 'szulo_mod' szulo.szulo.id %}">{{szulo.szulo.nev}}</a><br>
                        {% endfor %}
                        </td>
                        <td>
                        {{gyerek.szulok.0.szulo.email}}{% if gyerek.szulok.0.szulo.email != gyerek.szulok.1.szulo.email %}, {{gyerek.szulok.1.szulo.email}}{% endif %}
                        </td>
                        <td>{{gyerek.csoportok.0.csoport.helyszin}}</td>
                        
                      
                      {% else %}
                        <td bgcolor=#e6cfca><a href="{% url 'gyerek_mod' gyerek.id %}">{{gyerek.kod}}</a></td>
                        <td bgcolor=#e6cfca>{{gyerek.szul_ido|date:'Y-m-d'}}</td>
                        <td bgcolor=#e6cfca>{{gyerek.anyja_neve}}</td>
                        <td bgcolor=#e6cfca>Lezárt</td>
                        <td bgcolor=#e6cfca>
                        {% for szulo in gyerek.szulok%}
                          <a href="{% url 'szulo_mod' szulo.szulo.id %}">{{szulo.szulo.nev}}</a><br>
                        {% endfor %}
                        </td>
                        <td bgcolor=#e6cfca>
                        {{gyerek.szulok.0.szulo.email}}{% if gyerek.szulok.0.szulo.email != gyerek.szulok.1.szulo.email %}, {{gyerek.szulok.1.szulo.email}}{% endif %}
                        </td>
                        <td bgcolor=#e6cfca>{{gyerek.csoportok.0.csoport.helyszin}}</td>
                        
                      {% endif %}
                      
                  </tr>
                  {% endfor %}
              </tbody>
          </table>

        </div>
        <!-- /.card-body -->
        <div class="card-footer">
          Footer
        </div>
        <!-- /.card-footer-->
      </div>
      <!-- /.card -->

    </section>
    <!-- /.content -->
  </div>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}

  <script src="/static/assets/plugins/jquery/jquery.min.js"></script>
  <!-- Bootstrap 4 -->
  <script src="/static/assets/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
  <!-- AdminLTE App -->
  <script src="/static/assets/js/adminlte.min.js"></script>
  <!-- DataTable -->
	
	<script type="text/javascript" language="javascript" src="/static/assets/js/jquery.dataTables.min.js"></script>
	<script type="text/javascript" language="javascript" src="/static/assets/js/dataTables.buttons.min.js"></script>
	<script type="text/javascript" language="javascript" src="/static/assets/js/jszip.min.js"></script>
	<script type="text/javascript" language="javascript" src="/static/assets/js/pdfmake.min.js"></script>
	<script type="text/javascript" language="javascript" src="/static/assets/js/vfs_fonts.js"></script>
	<script type="text/javascript" language="javascript" src="/static/assets/js/buttons.html5.min.js"></script>
	<script type="text/javascript" language="javascript" src="/static/assets/js/js/buttons.print.min.js"></script>


<script>
  $(document).ready(function() {
    // Setup - add a text input to each footer cell
    $('#tabla thead tr').clone(true).appendTo( '#tabla thead' );
    $('#tabla thead tr:eq(1) th').each(function (i) {
                if (!$(this).hasClass("noFilter")) {
                    var title = $(this).text();
                    $(this).html('<input type="text" placeholder="Keres:' + title + '" />');

                    $('input', this).on('keyup change', function () {
                        if (table.column(i).search() !== this.value) {
                            table
                                .column(i)
                                .search(this.value)
                                .draw();
                        }
                    });
                }
                else {
                    $(this).html('<span></span>');
                }

            });

    var table = $('#tabla').DataTable( {
        orderCellsTop: true,
        fixedHeader: true,
        "dom":
           "<'row'<'col-sm-12'B>>" +
          "<'row'<'col-sm-12 col-md-6'lf><'col-sm-12 col-md-6'p>>" +
          "<'row'<'col-sm-12'tr>>" +
          "<'row'<'col-sm-12 col-md-6'i><'col-sm-6 col-md-3'>>",
        "language": {
          "url": "//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Hungarian.json"
              },
        "buttons": ['copy', 'excel', 'pdf', 'print'],
        "lengthMenu": [[15, 30, 50, -1], [15, 30, 50, "Mind"]]
    } );
} );
  </script>
{% endblock javascripts %}
